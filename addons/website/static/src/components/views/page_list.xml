<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

<t t-name="website.PageListRenderer.RecordRow" t-inherit="web.ListRenderer.RecordRow" owl="1">
    <xpath expr="//Field//ancestor::td/*[1]" position="before">
        <t t-if="column.name === 'name' and record.data.is_homepage and record.mode !== 'edit'">
            <i class="fa fa-fw fa-home fa-lg" title="Home page of the current website"/>
        </t>
    </xpath>
    <xpath expr="//tr[@class='o_data_row']" position="attributes">
        <attribute name="t-if">recordFilter(record, list.records)</attribute>
    </xpath>
</t>

<t t-name="website.PageListView" t-inherit="web.ListView" owl="1">
    <xpath expr="//t[@t-component='props.Renderer']" position="attributes">
        <attribute name="activeWebsite">state.activeWebsite</attribute>
    </xpath>
    <xpath expr="//SearchBar" position="replace">
        <WebsiteSearchBar websiteSelection="websiteSelection" activeWebsite="state.activeWebsite" onWebsiteSelected="(website) => this.onSelectWebsite(website)" t-if="searchBarToggler.state.showSearchBar" autofocus="firstLoad"/>
    </xpath>
</t>

<t t-name="website.SearchBarMenu" t-inherit="web.SearchBarMenu" t-inherit-mode="primary" owl="1">
    <xpath expr="//Dropdown" position="inside">
        <div class="o_dropdown_container o_website_menu w-100 w-lg-auto px-3 border-start">
            <div class="px-3 fs-5 mb-2">
                <i class="me-2 fa fa-globe"/>
                <h5 class="o_dropdown_title d-inline">Website</h5>
            </div>
            <t t-log="props.websiteSelection"/>
            <t t-log="props.activeWebsite"/>
            <t t-foreach="props.websiteSelection" t-as="website" t-key="website.id">
                <SearchDropdownItem class="{ o_menu_item: true, selected: website.id === props.activeWebsite.id }"
                                        checked="website.id === props.activeWebsite.id"
                                        parentClosingMode="'none'"
                                        onSelected="() => props.onWebsiteSelected(website)"
                    >
                        <span class="d-flex p-0 align-items-center justify-content-between">
                            <t t-esc="website.name"/>
                        </span>
                    </SearchDropdownItem>
                <div t-if="!website.id" class="dropdown-divider"/>
            </t>
        </div>
    </xpath>
</t>

<t t-name="website.SearchBar" t-inherit="web.SearchBar" t-inherit-mode="primary" owl="1">
    <xpath expr="//SearchBarMenu" position="replace">
        <WebsiteSearchBarMenu websiteSelection="props.websiteSelection" activeWebsite="props.activeWebsite" onWebsiteSelected="(website) => props.onWebsiteSelected(website)"/>
    </xpath>
</t>

</templates>
