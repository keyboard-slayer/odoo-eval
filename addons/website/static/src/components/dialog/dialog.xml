<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">
<t t-name="website.WebsiteDialog">
    <Dialog contentClass="contentClasses"
        size="props.size"
        title="props.title">
        <t t-set-slot="default">
            <t t-if="props.slots and props.slots.default" t-slot="default"/>
            <t t-else="" t-esc="props.body"/>
        </t>
        <t t-if="props.showFooter" t-set-slot="footer">
            <t t-if="props.slots and props.slots.footer" t-slot="footer"/>
            <t t-else="">
                <button class="btn btn-primary" t-on-click="protectedClick(props.primaryClick)" t-att-disabled="state.disabled">
                    <t t-esc="props.primaryTitle"/>
                </button>
                <button t-if="props.showSecondaryButton" class="btn btn-secondary" t-on-click="protectedClick(props.secondaryClick)" t-att-disabled="state.disabled">
                    <t t-esc="props.secondaryTitle"/>
                </button>
            </t>
        </t>
    </Dialog>
</t>

<t t-name="website.AddPageTemplatePreview" owl="1">
    <div t-ref="holder" class="o_page_template position-relative placeholder-glow mx-auto transition-base" t-att-class="{ 'mb-4': props.firstRow }">
        <div t-ref="preview" class="o_page_template_preview border border-white bg-white rounded shadow">
            <iframe class="border-0 pe-none transition-base" t-ref="iframe" src="about:blank"/>
        </div>
        <span class="placeholder position-absolute top-0 w-100 h-100 rounded" t-attf-style="animation-duration: #{props.animationDelay + 500}ms"/>
        <div class="o_button_area position-absolute top-0 w-100 h-100 d-flex align-items-center justify-content-center">
            <button class="btn btn-primary" t-on-click="select">Use this template</button>
        </div>
    </div>
</t>

<t t-name="website.AddPageTemplatePreviews" owl="1">
    <div class="container-fluid py-3 py-xl-4">
        <div class="row g-0">
            <t t-foreach="[...this.columns.entries()]" t-as="column" t-key="column[0]">
                <div class="col-lg-4 col-12">
                    <t t-foreach="[...column[1].entries()]" t-as="template" t-key="template[0]">
                        <AddPageTemplatePreview template="template[1]" animationDelay="(column_index * 500) + (template_index * 350)" firstRow="template_first"
                            addPage="props.addPage" getCssLinkEls="props.getCssLinkEls"
                        />
                    </t>
                    <t t-if="column[1].length === 0">
                        <div class="o_page_template position-relative"/>
                    </t>
                </div>
            </t>
        </div>
    </div>
</t>

<t t-name="website.AddPageTemplates" owl="1">
    <div class="overflow-hidden w-100" t-att-class="{o_loading: state.loading}">
        <div t-if="state.loading" class="d-flex align-items-center justify-content-center h-100">
            <div class="spinner-grow" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        <!-- Do not rely on Notebook to avoid pages from needing reload -->
        <div t-else="" class="d-flex w-100 h-100 vertical flex-row">
            <ul t-ref="tabs" class="nav nav-pills flex-column flex-nowrap overflow-y-auto">
                <t t-foreach="state.pages" t-as="page" t-key="page.id">
                    <li class="nav-item">
                        <a t-att-data-id="page.id"
                            t-on-click="() => this.onTabClick(page.id)"
                            class="nav-link p-3 rounded-0"
                            t-att-class="{active: page_first}"
                            href="#"
                            role="tab"
                            tabindex="0"
                            t-out="page.title"/>
                    </li>
                </t>
            </ul>
            <div t-ref="panes" class="position-relative flex-grow-1 flex-shrink-1 bg-200">
                <t t-foreach="state.pages" t-as="page" t-key="page.id">
                    <div t-att-data-id="page.id"
                         class="o_website_page_templates_pane position-absolute top-0 start-0 w-100 h-100 overflow-y-scroll bg-200"
                         t-att-class="{active: page_first}">
                        <AddPageTemplatePreviews
                            name="page.props.name"
                            addPage="page.props.addPage"
                            getCssLinkEls="page.props.getCssLinkEls"
                            templates="page.props.templates"
                        />
                    </div>
                </t>
            </div>
        </div>
    </div>
</t>

<t t-name="website.AddPageDialog" owl="1">
    <WebsiteDialog
        title="title"
        contentClass="'o_website_page_templates_dialog h-100'"
        showFooter="false"
        size="'xl'"
        close="props.close">
        <div class="row gy-4 d-none"> <!-- POC: Temporary hide, to be moved in "step 2 modal" -->
            <div class="col-md-2">
                <button class="btn btn-primary" t-on-click="() => this.addPage()">+ Blank Page</button>
            </div>
            <label class="col-form-label col-md-2">
                Page Title
            </label>
            <div class="col-md-5">
                <input type="text" t-model="state.name" class="form-control" required="required" t-ref="autofocus"/>
            </div>
            <div class="col-md-3 pt-1">
                <Switch label="switchLabel" value="state.addMenu" onChange="(value) => this.onChangeAddMenu(value)"/>
            </div>
        </div>
        <AddPageTemplates
            addPage="sectionsArch => this.addPage(sectionsArch)"
            getCssLinkEls="() => this.getCssLinkEls()"
            onTemplatePageChanged="name => this.onTemplatePageChanged(name)"
        />
    </WebsiteDialog>
</t>

</templates>
