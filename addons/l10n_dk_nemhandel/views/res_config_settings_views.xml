<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="res_config_settings_view_form" model="ir.ui.view">
        <field name="name">res.config.settings.view.form.inherit.proxy.user</field>
        <field name="model">res.config.settings</field>
        <field name="inherit_id" ref="account.res_config_settings_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//app[@name='account']/block" position="after">
                <block title="Nemhandel E-Delivery" id="l10n_dk_nemhandel">
                    <div id="l10n_dk_nemhandel">
                        <div class="col-12 col-lg-12 o_setting_box">
                            <field name="l10n_dk_nemhandel_proxy_state" invisible="1"/>
                            <div class="o_setting_right_pane border-0">
                                <div class="mb-2">
                                    <span class="o_form_label">
                                        Nemhandel Details
                                    </span>
                                    <span class="fa fa-lg fa-building-o" title="Values set here are company-specific."/>
                                </div>
                                <div invisible="l10n_dk_nemhandel_proxy_state != 'not_registered'">
                                    <div class="text-muted oe_inline">
                                        Start sending and receiving documents via Nemhandel as soon as your registration is complete.
                                    </div>
                                    <div class="pt-3">
                                        <div class="row">
                                            <label string="Nemhandel RecipientID"
                                                   for="l10n_dk_nemhandel_identifier_type"
                                                   class="col-lg-3 o_light_label"/>
                                            <field name="l10n_dk_nemhandel_identifier_type"/>
                                        </div>
                                        <div class="row">
                                            <label string="Nemhandel Endpoint"
                                                   for="l10n_dk_nemhandel_identifier_value"
                                                   class="col-lg-3 o_light_label"/>
                                            <field name="l10n_dk_nemhandel_identifier_value"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="row"
                                     invisible="l10n_dk_nemhandel_proxy_state in ('rejected', 'canceled', 'sent_verification')">
                                    <label string="Contact email"
                                           for="l10n_dk_nemhandel_contact_email"
                                           class="col-lg-3 o_light_label"/>
                                    <field name="l10n_dk_nemhandel_contact_email"/>
                                </div>
                                <div class="row"
                                     invisible="l10n_dk_nemhandel_proxy_state not in ('not_registered', 'not_verified')">
                                    <label string="Phone Number"
                                           for="l10n_dk_nemhandel_phone_number"
                                           class="col-lg-3 o_light_label"/>
                                    <field name="l10n_dk_nemhandel_phone_number"
                                           required="l10n_dk_nemhandel_proxy_state == 'not_verified'"/>
                                </div>
                                <div class="row mb-3">
                                    <div class="content-group mt-3"
                                         invisible="l10n_dk_nemhandel_proxy_state in ('rejected', 'not_registered', 'canceled', 'not_verified', 'sent_verification')">
                                        <div class="row">
                                            <label string="Incoming Invoices Journal"
                                                   for="l10n_dk_nemhandel_purchase_journal_id"
                                                   class="col-lg-3 o_light_label"/>
                                            <field name="l10n_dk_nemhandel_purchase_journal_id"
                                                   required="l10n_dk_nemhandel_proxy_state not in ('rejected', 'not_registered', 'canceled', 'not_verified', 'sent_verification')"/>
                                        </div>
                                    </div>
                                    <div class="content-group mt-3"
                                         invisible="l10n_dk_nemhandel_proxy_state != 'sent_verification'">
                                        <span class="text-muted">
                                            We sent a verification code to
                                            <field name="l10n_dk_nemhandel_phone_number"
                                                   nolabel="1"
                                                   readonly="l10n_dk_nemhandel_proxy_state == 'sent_verification'"/>.
                                        </span>
                                        <div class="row mt-1 ps-3">
                                            <field name="l10n_dk_nemhandel_verification_code" widget="nemhandel_verification_code"/>
                                        </div>
                                    </div>
                                    <div invisible="l10n_dk_nemhandel_proxy_state != 'pending'">
                                        <p>
                                            Your registration should be activated within a day.
                                        </p>
                                    </div>
                                    <div class="pt-3 pb-3"
                                         invisible="l10n_dk_nemhandel_proxy_state == 'not_registered'">
                                        Application status:
                                        <b>
                                            <field name="l10n_dk_nemhandel_proxy_state"
                                                   class="oe_inline"
                                                   readonly="1"
                                                   decoration-danger="l10n_dk_nemhandel_proxy_state == 'rejected'"
                                                   decoration-info="l10n_dk_nemhandel_proxy_state == 'active'"/>
                                            <span class="text-info" invisible="not l10n_dk_nemhandel_edi_mode == 'demo'"> (Demo)</span>
                                            <span class="text-info" invisible="not l10n_dk_nemhandel_edi_mode == 'test'"> (Test)</span>
                                        </b>
                                    </div>
                                    <div invisible="l10n_dk_nemhandel_proxy_state != 'pending'">
                                        <p>
                                            Your registration should be activated within a day.
                                        </p>
                                    </div>
                                    <div invisible="l10n_dk_nemhandel_proxy_state != 'rejected'">
                                        <p>
                                            The rejection reason has been sent to you via email.
                                        </p>
                                        <p>
                                            Please do not hesitate to contact our support if you need further assistance.
                                        </p>
                                    </div>
                                    <div class="mt-4" invisible="l10n_dk_nemhandel_proxy_state != 'not_registered'">
                                        <field name="l10n_dk_nemhandel_edi_mode_constraint" invisible="1"/>
                                        <field name="l10n_dk_nemhandel_edi_mode"
                                               widget="l10n_dk_nemhandel_radio_field"
                                               class="o_field_radio"
                                               readonly_items="l10n_dk_nemhandel_edi_mode_constraint != 'prod' and ['prod'] or []"
                                               hidden_items="l10n_dk_nemhandel_edi_mode_constraint != 'test' and ['test'] or []"
                                               options="{'horizontal': true }"/>
                                        <div class="mb-3" invisible="not l10n_dk_nemhandel_edi_mode == 'prod'">
                                            By clicking the button below I accept that Odoo may process my e-invoices.
                                        </div>
                                        <div class="mb-3" invisible="not l10n_dk_nemhandel_edi_mode == 'test'">
                                            Test mode allows registration of the user on the test Nemhandel network.
                                            By clicking the button below I accept that Odoo may process my e-invoices.
                                        </div>
                                        <div class="mb-3" invisible="not l10n_dk_nemhandel_edi_mode == 'demo'">
                                            In demo mode sending and receiving invoices is simulated. There will be no communication with the Nemhandel network.
                                        </div>
                                    </div>
                                    <div class="d-flex gap-1 action_buttons" colspan="3">
                                        <widget name="l10n_dk_nemhandel_settings_buttons"
                                                invisible="l10n_dk_nemhandel_proxy_state not in ('not_registered', 'not_verified', 'sent_verification', 'pending', 'manually_approved', 'active')"/>
                                        <div class="mt-3"
                                             invisible="l10n_dk_nemhandel_proxy_state in ('not_registered', 'active', 'rejected', 'canceled')">
                                            <button name="button_l10n_dk_nemhandel_cancel_registration"
                                                    type="object"
                                                    string="Cancel registration"
                                                    class="btn btn-secondary"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </block>
            </xpath>
        </field>
    </record>
</odoo>
