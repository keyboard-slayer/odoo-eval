<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- The layout is slightly different from the ubl 21 template, for simplicity we will override ubl 20 again -->
    <template id="ubl_pint_InvoiceType" inherit_id="account_edi_ubl_cii.ubl_20_InvoiceType" primary="True">
        <xpath expr="//*[local-name()='IssueDate']" position="after">
            <cbc:DueDate
                    xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
                    xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
                    xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
                    t-if="invoice.move_type == 'out_invoice'"
                    t-out="vals.get('due_date')"/>
        </xpath>
        <xpath expr="//*[local-name()='DocumentCurrencyCode']" position="after">
<!--            <cbc:TaxCurrencyCode todo check-->
<!--                    xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"-->
<!--                    xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"-->
<!--                    xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"-->
<!--                    t-att="vals.get('tax_currency_code_attrs', {})"-->
<!--                    t-out="invoice.currency_id.name.upper()"/>-->
            <cbc:BuyerReference
                    xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"
                    xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
                    xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
                    t-out="vals.get('buyer_reference')"/>
        </xpath>
    </template>
</odoo>
