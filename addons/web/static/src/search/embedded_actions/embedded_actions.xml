<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="web.EmbeddedActions">
        <div t-ref="root" class="o_embedded_actions overflow-hidden d-flex flex-wrap w-100 align-items-center justify-content-center gap-2" t-att-class="props.className">
            <t t-foreach="props.embeddedActions" t-as="action" t-key="action.id">
                <t t-if="_checkValueLocalStorage(action)">
                    <button class="btn btn-secondary"
                            t-att-class="{ 'active': state.currentEmbeddedAction?.id === action.id, 'o_draggable': !!action.id}"
                            t-on-click="() => this.onEmbeddedActionClick(action)"
                            t-att-data-id="action.id"
                    >
                        <span t-out="action.name"/>
                    </button>
                </t>
            </t>
            <EmbeddedActionsDropdown embeddedActions="props.embeddedActions"/>
        </div>
    </t>

    <t t-name="web.EmbeddedActionsDropdown">
        <Dropdown menuClass="'o_embedded_actions_dropdown_menu'">
            <button class="btn btn-secondary">
                <i class="fa fa-sliders"/>
            </button>
            <t t-set-slot="content">
                <t t-foreach="props.embeddedActions" t-as="action" t-key="action.id">
                    <DropdownItem 
                        class="this.getDropdownClass(action)"
                        onSelected="() => this.env.isSmall ? this.onEmbeddedActionClick(action) : action.id ? this._setVisibility(action.id) : {}"
                        closingMode="'none'"
                    >
                        <div class="d-flex p-0 pe-1 align-items-center justify-content-between">
                            <span t-out="action.name"/>
                            <i t-if="action.is_deletable" class="o_icon_right btn btn-link text-danger p-0 position-absolute end-0 fa fa-trash-o" title="Delete item" t-on-click.stop="() => this.openConfirmationDialog(action)" />
                        </div>
                    </DropdownItem>
                </t>
                <div role="separator" class="dropdown-divider"/>
                <AccordionItem class="'o_save_current_view'" description.translate="Save View">
                    <div class="px-2 py-2">
                        <input type="text"
                            t-ref="newActionNameRef"
                            class="o_input mb-2"
                            t-model.trim="state.newActionName"
                        />
                        <CheckBox value="state.newActionIsShared" onChange.bind="_onShareCheckboxChange">
                            <span data-tooltip="Make this embedded action available to other users">Shared</span>
                        </CheckBox>
                    </div>
                    <div class="px-3 py-2">
                        <button class="o_save_favorite btn btn-primary w-100" t-on-click="_saveNewAction">
                            Save
                        </button>
                    </div>
                </AccordionItem>
            </t>
        </Dropdown>
    </t>
</templates>