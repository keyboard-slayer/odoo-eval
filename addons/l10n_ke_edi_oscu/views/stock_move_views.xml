<?xml version="1.0" encoding="utf-8"?>
<odoo>

        <!-- <record id="l10n_ke_edi_oscu_view_move_tree" model="ir.ui.view"> -->
        <!--     <field name="name">stock.move.tree</field> -->
        <!--     <field name="model">stock.move</field> -->
        <!--     <field name="mode">primary</field> -->
        <!--     <field eval="8" name="priority"/> -->
        <!--     <field name="arch" type="xml"> -->
        <!--         <tree string="Moves" create="0" default_order="date desc"> -->
        <!--             <field name="reference" groups="base.group_no_one"/> -->
        <!--             <field name="l10n_ke_oscu_flow_type_code"/> -->
        <!--         </tree> -->
        <!--     </field> -->
        <!-- </record> -->

        <record id="l10n_ke_edi_oscu_view_move_tree" model="ir.ui.view">
            <field name="name">l10n.ke.edi.oscu.stock.move.tree</field>
            <field name="model">stock.move</field>
            <field eval="8" name="priority"/>
            <field name="arch" type="xml">
                <tree string="Moves" create="0" default_order="date desc">
                    <field name="date" groups="base.group_no_one" decoration-danger="(state not in ('cancel','done')) and date > current_date"/>
                    <field name="reference"/>
                    <field name="picking_type_id" column_invisible="True"/>
                    <field name="location_usage" column_invisible="True"/>
                    <field name="location_dest_usage" column_invisible="True"/>
                    <field name="product_id" readonly="state == 'done'"/>
                    <field name="location_id" options="{'no_create': True}" string="From"
                        decoration-muted="location_usage not in ('internal','transit')"/>
                    <field name="location_dest_id" options="{'no_create': True}" string="To"
                        decoration-muted="location_dest_usage not in ('internal','transit')"/>
                    <field name="product_packaging_id" groups="product.group_stock_packaging"
                        optional="hide" context="{'default_product_id': product_id}"
                        readonly="not product_id"/>
                    <field name="product_uom_qty" sum="Total Demand" readonly="state == 'done'"/>
                    <field name="quantity" string="Quantity" sum="Total Quantity"
                        decoration-danger="(location_usage in ('internal','transit')) and (location_dest_usage not in ('internal','transit'))"
                        decoration-success="(location_usage not in ('internal','transit')) and (location_dest_usage in ('internal','transit'))"/>
                    <field name="product_uom" options="{'no_open': True, 'no_create': True}" string="Unit" groups="uom.group_uom"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                    <field name="state" widget='badge' optional="show"
                           decoration-danger="state=='cancel'"
                           decoration-info="state== 'assigned'"
                           decoration-muted="state == 'draft'"
                           decoration-success="state == 'done'"
                           decoration-warning="state not in ('draft','cancel','done','assigned')"/>
                </tree>
            </field>
        </record>

        <record id="l10n_ke_edi_oscu_view_move_form" model="ir.ui.view">
            <field name="name">l10n.ke.edi.oscu.stock.move.form</field>
            <field name="model">stock.move</field>
            <field eval="1" name="priority"/>
            <field name="arch" type="xml">
                <form string="Stock Moves" create="0" edit="0">
                <field name="company_id" invisible="1"/>
                <header>
                    <field name="state" widget="statusbar" statusbar_visible="draft,confirmed,assigned,done" />
                    <button name="action_l10n_ke_oscu_save_stock_master" string="Post to OSCU" class="oe_highlight" type="object" groups="account.group_account_invoice" data-hotkey="q"/>
                </header>
                <sheet>
                    <group>
                        <group name="main_grp" colspan="2">
                            <group name="l10n_ke_edi_oscu_grp1" string="eTIMS Details">
                                <field name="l10n_ke_oscu_flow_type_code"/>
                                <field name="l10n_ke_oscu_partner_branch_id"/>
                                <field name="l10n_ke_oscu_sar_number"/>
                            </group>
                            <group name="l10n_ke_edi_oscu_grp2" string="Move Details">
                                <field name="product_id" readonly="state == 'done'"/>
                                <field name="product_uom_category_id" invisible="1"/>
                                <label for="product_uom_qty"/>
                                <div class="o_row">
                                    <field name="product_uom_qty" readonly="state == 'done'"/>
                                    <field name="product_uom" options="{'no_open': True, 'no_create': True}" groups="uom.group_uom"/>
                                </div>
                                <field name="name" invisible="1"/>
                                <div class="o_td_label">
                                    <label for="date" string="Date Scheduled" invisible="state == 'done'"/>
                                    <label for="date" string="Date Processing" invisible="state != 'done'"/>
                                </div>
                                <field name="date" readonly="1" nolabel="1"/>
                            </group>
                        </group>
                    </group>
                    <group name="linked_group" string="Linked Moves" groups="base.group_no_one" colspan="2">
                        <field name="move_orig_ids" string="Origin Moves" readonly="1">
                            <tree>
                                <field name="location_id"/>
                                <field name="location_dest_id"/>
                                <field name="product_uom_qty" readonly="state == 'done'"/>
                                <field name="product_uom"/>
                                <field name="state"/>
                            </tree>
                        </field>
                        <field name="move_dest_ids" string="Destination Moves" readonly="1">
                            <tree>
                                <field name="location_id"/>
                                <field name="location_dest_id"/>
                                <field name="product_uom_qty" readonly="state == 'done'"/>
                                <field name="product_uom"/>
                                <field name="state"/>
                            </tree>
                        </field>
                    </group>
                </sheet>
                </form>
            </field>
        </record>

        <record id="stock_move_l10n_ke_oscu_action" model="ir.actions.act_window">
            <field name="name">OSCU Stock Moves</field>
            <field name="res_model">stock.move</field>
            <field name="view_id" ref="l10n_ke_edi_oscu_view_move_tree"/>
        </record>

        <!-- <record model="ir.actions.act_window.view" id="action_l10n_ke_edi_oscu_stock_move_tree_all"> -->
        <!--     <field name="sequence" eval="3"/> -->
        <!--     <field name="view_mode">tree</field> -->
        <!--     <field name="view_id" ref="l10n_ke_edi_oscu_view_move_tree"/> -->
        <!--     <field name="act_window_id" ref="stock_move_l10n_ke_oscu_action"/> -->
        <!-- </record> -->

    <menuitem action="stock_move_l10n_ke_oscu_action" id="menuitem_l10n_ke_edi_oscu_stock_move_tree" name="KE Moves" parent="stock.menu_warehouse_report"/>

</odoo>
