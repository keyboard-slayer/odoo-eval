<?xml version="1.0" encoding="UTF-8"?>
<templates>
    <t t-name="website_sale.ReorderModal" owl="1">
        <Dialog title="env._t('Re-Order')">
            <table id="o_wsale_reorder_table" class="table h-100">
                <tbody id="o_wsale_reorder_body" class="sale_tbody">
                    <t t-foreach="content.products" t-as="product" t-key="product_index">
                        <tr class="js_product">
                            <td t-if="product.has_image" class="td-img w-0 py-4">
                                <img class="d-none d-md-inline product_detail_img" t-att-alt="product.name" t-attf-src="/web/image/product.product/{{product.product_id}}/image_128"/>
                            </td>
                            <td class="py-4" t-att-colspan="product.has_image ? '1' : '2'">
                                <h5><t t-esc="product.name"/></h5>
                                <span class="text-muted d-none d-md-inline-block" t-if="product.description_sale" t-out="product.description_sale"/>
                            </td>
                            <t t-if="product.add_to_cart_allowed">
                                <td class="text-center td-qty td-price h-100 py-4">
                                    <div class="d-flex flex-column align-items-end h-100">
                                        <div class="css_quantity input-group">
                                            <button t-attf-href="#" class="btn btn-link float_left js_add_cart_json border-end-0" aria-label="Remove one" title="Remove one" t-on-click.stop.prevent="() => this.changeProductQty(product, product.qty - 1)">
                                                <i class="position-relative z-index-1 fa fa-minus"></i>
                                            </button>
                                            <input type="number"
                                                class="js_quantity form-control quantity border-start-0 border-end-0 text-center"
                                                t-att-value="product.qty"
                                                t-on-change="(ev) => this.onChangeProductQtyInput(ev, product)"/>
                                            <button t-attf-href="#" class="btn btn-link float_left js_add_cart_json border-start-0" aria-label="Add one" title="Add one" t-on-click.stop.prevent="() => this.changeProductQty(product, product.qty + 1)">
                                                <i class="position-relative z-index-1 fa fa-plus"></i>
                                            </button>
                                        </div>
                                        <div t-if="product.qty_warning and product.qty_warning !== ''" class="text-warning fw-bold">
                                            <i class="fa fa-exclamation-triangle"/>
                                            <span t-esc="product.qty_warning"/>
                                        </div>
                                        <span class="h6 fw-bold mb-0 mt-auto" t-esc="formatMonetary(product.combinationInfo.price, content.currency)"/>
                                    </div>
                                </td>
                            </t>
                            <t t-else="">
                                <td class="text-center" colspan="2">
                                    <div class="text-warning fw-bold">
                                        <i class="fa fa-exclamation-triangle"/>
                                        <span t-esc="getWarningForProduct(product)"/>
                                    </div>
                                </td>
                            </t>
                        </tr>
                    </t>
                </tbody>
            </table>
            <div id="o_wsale_reorder_total" class="row" name="total" style="page-break-inside: avoid;">
                <div class="col-sm-7 col-md-6 ms-auto">
                    <table class="table table-sm">
                        <tr class="border-black o_total">
                            <td class="text-end">
                                <strong>Total</strong>
                            </td>
                            <td class="text-end">
                                <span t-out="formatMonetary(total, content.currency)"/>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <t t-set-slot="footer">
            <div class="d-flex justify-content-between">
                <button class="btn btn-secondary o_wsale_reorder_cancel" t-on-click.stop.prevent="props.close">
                    Discard
                </button>
                <button class="btn btn-primary o_wsale_reorder_confirm" t-att-disabled="!hasBuyableProducts" t-on-click="confirmReorder">
                    Add To Cart
                </button>
            </div>
            </t>
        </Dialog>
    </t>

    <t t-name="website_sale.ReorderConfirmationDialog" t-inherit="web.ConfirmationDialog" t-inherit-mode="primary" owl="1">
        <xpath expr="//button[1]" position="replace">
            <button class="btn btn-primary" t-on-click="_confirm">
              Yes
            </button>
        </xpath>
        <xpath expr="//button[2]" position="replace">
            <button class="btn btn-secondary" t-on-click="_cancel">
              No
            </button>
        </xpath>
    </t>
</templates>
