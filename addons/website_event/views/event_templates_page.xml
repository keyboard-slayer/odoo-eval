<?xml version="1.0" encoding="utf-8"?>
<odoo>

<!-- Event -->
<template id="layout" name="Event">
    <t t-call="website.layout">
        <!-- Options -->
        <t t-set="opt_events_list_categories" t-value="is_view_active('website_event.opt_events_list_categories')"/>
        <div id="wrap" t-attf-class="o_wevent_event js_event d-flex flex-column h-100 #{'o_wevent_hide_sponsors' if hide_sponsors else ''}">
            <t t-if="not hide_submenu" t-call="website_event.navbar"/>
            <t t-out="0"/>
            <t t-set="editor_sub_message">Following content will appear on all events.</t>
            <div class="oe_structure oe_empty" id="oe_structure_website_event_layout_1" t-att-data-editor-sub-message="editor_sub_message"/>
        </div>
    </t>
</template>

<template id="navbar" name="Event Navbar">
<<<<<<< HEAD
    <t t-set="is_rendering_cta" t-value="event.menu_register_cta and not event.is_participating and not hide_register_cta"/>
    <t t-set="is_rendering_register_button" t-value="event.register_menu_ids.menu_id._is_active() and event.event_registrations_open"/>

    <section id="o_wevent_event_submenu">
        <!-- Mobile -->
        <div id="o_wevent_submenu_mobile" class="container d-flex d-lg-none align-items-center mt-3 mb-3 mb-lg-2">
            <a t-if="navbar__back_url" t-att-href="navbar__back_url" t-att-title="navbar__back_title or 'Go back'">
                <i class="oi oi-chevron-left"/>
                <span t-out="navbar__back_text or 'Go back'"/>
            </a>
            <a t-else="" href="/event" title="All Events">
                <i class="oi oi-chevron-left"/>
                <span>All Events</span>
            </a>
            <!-- Add Register additional CTA button, in addition to menus -->
            <a t-if="is_rendering_cta"
                t-att-href="'/event/%s/register' % (slug(event))"
                t-attf-class="btn btn-primary ms-auto"
                title="Registration">
                Registration
            </a>

            <t t-call="website_event.navbar_dropdown"/>
||||||| parent of 830ad63cb245 (temp)
    <div class="container my-3">
        <a href="/event">
            <i class="fa fa-chevron-left me-2"/>
            <span>Back to events</span> 
        </a>
    </div>
    <div class="mb-3">
        <div class="container d-flex flex-wrap flex-lg-nowrap justify-content-between align-items-center">
            <t t-set="active_submenu" t-value="event.menu_id.child_id.filtered(lambda sm: sm._is_active())"></t>
            <h6 t-field="event.name" t-attf-class="flex-grow-1 #{'my-3' if active_submenu else 'mb-0'}"/>
            <div class="d-flex flex-grow-1 align-items-center justify-content-end gap-2">
                <nav t-if="active_submenu" class="navbar navbar-light navbar-expand-md p-0 d-md-none">
                    <div class="container align-items-baseline">
                        <div id="o_wevent_event_submenu" class="dropdown nav-item">
                            <button class="dropdown-toggle btn btn-light" data-bs-toggle="dropdown">
                                <t t-out="active_submenu.name if len(active_submenu) == 1 else ''"/>
                            </button>
                            <ul class="dropdown-menu flex-md-wrap w-100" t-att-data-menu_name="editable and 'Event Menu'" t-att-data-content_menu_id="editable and event.menu_id.id">
                                <t t-foreach="event.menu_id.child_id" t-as="submenu">
                                    <t t-call="website.submenu">
                                        <t t-set="link_class" t-value="'dropdown-item'"/>
                                    </t>
                                </t>
                            </ul>
                        </div>
                    </div>
                </nav>
                <!-- Add Register additional CTA button, in addition to menus -->   
                <a t-if="event.menu_register_cta and not event.is_participating"
                    t-att-href="'/event/%s/register' % (slug(event))"
                    t-attf-class="btn btn-primary #{'d-none' if hide_register_cta else ''}">
                    Register
                </a>
            </div>
=======
    <div class="container my-3">
        <a href="/event">
            <i class="fa fa-chevron-left me-2"/>
            <span>Back to events</span> 
        </a>
    </div>
    <div class="mb-3">
        <div class="container d-flex flex-wrap flex-lg-nowrap justify-content-between align-items-center">
            <t t-set="active_submenu" t-value="event.menu_id.child_id.filtered(lambda sm: sm._is_active())"></t>
            <h6 t-field="event.name" t-attf-class="flex-grow-1 #{'my-2' if active_submenu else 'mb-0'}"/>
            <div class="d-flex flex-grow-1 align-items-center justify-content-end gap-2">
                <nav t-if="active_submenu" class="navbar navbar-light navbar-expand-md p-0 d-md-none">
                    <div class="container align-items-baseline">
                        <div id="o_wevent_event_submenu" class="dropdown nav-item">
                            <button class="dropdown-toggle btn btn-light" data-bs-toggle="dropdown">
                                <t t-out="active_submenu.name if len(active_submenu) == 1 else ''"/>
                            </button>
                            <ul class="dropdown-menu flex-md-wrap w-100" t-att-data-menu_name="editable and 'Event Menu'" t-att-data-content_menu_id="editable and event.menu_id.id">
                                <t t-foreach="event.menu_id.child_id" t-as="submenu">
                                    <t t-call="website.submenu">
                                        <t t-set="link_class" t-value="'dropdown-item'"/>
                                    </t>
                                </t>
                            </ul>
                        </div>
                    </div>
                </nav>
                <!-- Add Register additional CTA button, in addition to menus -->   
                <a t-if="event.menu_register_cta and not event.is_participating"
                    t-att-href="'/event/%s/register' % (slug(event))"
                    t-attf-class="btn btn-primary #{'d-none' if hide_register_cta else ''}">
                    Register
                </a>
            </div>
>>>>>>> 830ad63cb245 (temp)
        </div>

        <!-- Desktop -->
        <div id="o_wevent_submenu_desktop" class="d-none d-lg-block mt-3 mb-3 mb-lg-2">
            <div class="container">
                <div class="d-flex align-items-baseline justify-content-between">
                    <nav class="d-flex flex-wrap justify-content-between align-items-center gap-2 flex-grow-1">
                        <ul class="breadcrumb p-0 m-0">
                            <li class="breadcrumb-item">
                                <a href="/event" title="Back to All Events">All Events</a>
                            </li>
                            <t t-if="navbar__back_url">
                                <li class="breadcrumb-item">
                                    <a t-attf-href="/event/{{slug(event)}}" t-attf-title="Back to {{event.name}}" t-field="event.name"/>
                                </li>
                                <li class="breadcrumb-item">
                                    <a t-att-href="navbar__back_url" t-att-title="navbar__back_title" t-out="navbar__back_text"/>
                                </li>
                            </t>
                            <t t-else="">
                                <li class="breadcrumb-item active" aria-current="page"><span class="pe-3" t-field="event.name"/></li>
                            </t>
                        </ul>
                        <ul t-if="not navbar__back_url" class="nav" t-att-data-menu_name="editable and 'Event Menu'" t-att-data-content_menu_id="editable and event.menu_id.id">
                            <t t-foreach="event.menu_id.child_id" t-as="submenu">
                                <t t-if="(submenu == event.register_menu_ids.menu_id and not is_rendering_register_button and not is_rendering_cta) or submenu != event.register_menu_ids.menu_id" t-call="website.submenu">
                                    <t t-set="item_class" t-value="'nav-item'"/>
                                    <t t-set="link_class" t-value="'nav-link text-nowrap'"/>
                                </t>
                            </t>
                        </ul>
                    </nav>

                    <!-- Workaround to avoid flickering while navigating between pages with and without CTA -->
                    <span t-if="not is_rendering_cta" aria-hidden="true" class="btn invisible w-0 px-0">&#160;</span>

                    <a t-else=""
                        t-att-href="'/event/%s/register' % (slug(event))"
                        t-attf-class="btn btn-primary ms-3"
                        title="Registration">
                        Registration
                    </a>

                    <t t-if="navbar__back_url" t-call="website_event.navbar_dropdown"/>
                </div>
            </div>
        </div>
    </section>
</template>

<template id="navbar_dropdown" name="Event Navbar Dropdown">
   <div t-if="len(event.menu_id.child_id) &gt; 1" t-attf-class="dropdown o-dropdown--no-caret {{not is_rendering_cta and 'ms-auto' or 'ms-2'}}">
        <button class="dropdown-toggle o-no-caret btn btn-light" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fa fa-bars" role="img"/>
        </button>
        <ul class="dropdown-menu" t-att-data-menu_name="editable and 'Event Menu'" t-att-data-content_menu_id="editable and event.menu_id.id" role="menu">
            <li><h6 class="dropdown-header" t-field="event.name"/></li>

            <t t-foreach="event.menu_id.child_id" t-as="submenu">
                <t t-call="website.submenu">
                    <t t-set="link_class" t-value="'dropdown-item ps-4'"/>
                </t>
            </t>
        </ul>
    </div>
</template>

</odoo>
