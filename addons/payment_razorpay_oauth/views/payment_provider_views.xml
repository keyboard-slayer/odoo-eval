<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="payment_provider_form_razorpay_oauth" model="ir.ui.view">
        <field name="name">Razorpay Provider Form</field>
        <field name="model">payment.provider</field>
        <field name="inherit_id" ref="payment_razorpay.payment_provider_form_razorpay"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='razorpay_webhook_secret']" position="replace">
                <label for="razorpay_webhook_secret"/>
                <div class="o_row">
                    <field name="razorpay_webhook_secret"
                           string="Webhook Secret"
                           groups="base.group_no_one"
                           password="True"/>
                    <button
                           string="Create your webhook"
                           name="action_razorpay_create_or_update_webhook"
                           type="object"
                           help="If you change the your base url, you will need to update the
                                 webhook else payment state will not be updated in odoo."
                           class="btn-primary"
                           groups="base.group_no_one"
                           invisible="not razorpay_access_token or razorpay_webhook_secret"
                    />
                </div>
                <label for="razorpay_account_id"/>
                    <div class="o_row">
                        <field name="razorpay_account_id" groups="base.group_no_one"/>
                        <button
                            string="Reset your Razorpay account"
                            name="action_razorpay_revoked_token"
                            type="object"
                            class="btn-link"
                            confirm="Are you sure you want to disconnect?"
                            invisible="not razorpay_account_id"
                        />
                    </div>
            </xpath>
            <group name="provider_credentials" position="after">
                <field name="razorpay_public_token" invisible="1"/>
                <field name="razorpay_refresh_token" invisible="1"/>
                <field name="razorpay_account_id" invisible="1"/>
                <field name="razorpay_access_token" invisible="1"/>
                <field name="razorpay_access_token_expiration" invisible="1"/>
                <field name="razorpay_key_id" invisible="1"/>
                <field name="razorpay_webhook_secret" invisible="1"/>
                <div class="alert alert-warning" role="alert" invisible="not razorpay_key_id">
                    You are using Old method key and secret suggested to change to Oauth By click on Connect.
                </div>
                <div invisible="code != 'razorpay'">
                    <button string="Connect"
                            name="action_razorpay_redirect_to_oauth_url"
                            type="object"
                            class="btn-primary"
                            invisible="razorpay_public_token"/>
                </div>
            </group>
        </field>
    </record>

</odoo>
