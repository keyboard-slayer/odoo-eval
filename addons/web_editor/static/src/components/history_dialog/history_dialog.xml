<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">
    <t t-name="web_editor.HistoryDialog">
        <Dialog size="size" title="title" bodyClass="'html-history-dialog p-0'">
            <div class="d-sm-flex">
                <div class="revision-list d-flex flex-column flex-shrink-0 gap-2 p-3">
                    <div t-if="!state.revisionsData.length" class="text-center fw-bolder">No history</div>
                    <t t-foreach="state.revisionsData" t-as="rev" t-key="rev.revision_id">
                        <div t-attf-class="revision-entry #{rev.allRevisionIds.includes(state.revisionId) ? 'active' : ''}">
                            <a type="object" href="#" role="button"
                               t-attf-class="btn btn-outline-primary revision-list-title text-start #{rev.allRevisionIds.includes(state.revisionId) ? 'active' : ''}"
                               t-on-click="() => this.updateCurrentRevision(rev.revision_id)">
                                <strong t-esc="this.getRevisionDate(rev)"/>
                            </a>
                            <t t-if="rev.detailedData.length > 1">
                                <t t-foreach="rev.detailedData" t-as="detailedRev" t-key="detailedRev.revision_id">
                                    <a type="object" href="#" role="button"
                                       t-attf-class="btn btn-outline-primary revision-list-detail #{state.revisionId === detailedRev.revision_id ? 'active' : ''}"
                                       t-on-click="() => this.updateCurrentRevision(detailedRev.revision_id)">
                                        <t t-esc="rev.create_user_name"/>,
                                        <t t-esc="this.getRevisionHour(detailedRev)"/>
                                    </a>
                                </t>
                            </t>
                        </div>
                    </t>
                </div>
                <div class="history-container d-flex flex-grow-1 min-w-0 p-3" t-ref="history-container">
                    <Notebook defaultPage="'history'">
                        <t t-set-slot="history" name="'history'" isVisible="true" title="notebookTabs[0]">
                            <div class="top-message">
                                <p class="text-info">
                                    <i class="fa fa-info-circle" aria-hidden="true"></i>
                                    <t t-esc="state.revisionContentMetadata"/>
                                </p>
                            </div>
                            <div class="history-tab-content" >
                                <t t-if="state.revisionContent?.length" t-out="state.revisionContent"/>
                                <t t-else="" t-out="props.noContentHelper" />
                            </div>
                        </t>
                        <t t-set-slot="comparison" name="'comparison'" isVisible="true" title="notebookTabs[1]">
                            <div class="top-message" >
                                <p class="text-info">
                                    <i class="fa fa-info-circle" aria-hidden="true"></i>
                                    <t t-esc="state.revisionComparisonMetadata"/>
                                </p>
                            </div>
                            <div class="history-tab-content" >
                                <t t-out="state.revisionComparison"/>
                            </div>
                        </t>
                    </Notebook>
                </div>
            </div>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="_onRestoreRevisionClick">Restore</button>
                <button class="btn btn-secondary" t-on-click="props.close">Close</button>
            </t>
        </Dialog>
    </t>
</templates>
