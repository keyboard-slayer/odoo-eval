<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="pos_self_order.ProductList" owl="1">
        <t t-set="categories" t-value="Array.from(selfOrderKiosk.categoryList)" />
        <div class="o_kiosk_product_list">
            <div t-if="selfOrderKiosk.kiosk_image_home" class="header-image" t-attf-style="background-image: url(/kiosk/get-bg-image/{{selfOrderKiosk.pos_config_id}}/brand)" />
            <div class="category-list d-flex flex-column flex-wrap gap-3 p-3 bg-300 shadow-sm" t-ref="categoryList">
                <div
                    t-foreach="categories"
                    t-as="category"
                    t-key="category"
                    t-ref="category_{{category}}"
                    t-attf-class="{{currentProductGroup.name === category ? 'active' : 'text-dark'}} category-item border rounded d-flex align-items-center justify-content-center"
                    t-on-click="() => this.categoryClicked(category)">
                    <span t-esc="category" />
                </div>
            </div>
            <div class="product-list p-4" t-attf-style="height:calc(100vh - {{ selfOrderKiosk.kiosk_image_home ? '380px' : '200px'}})" t-ref="productsList">
                <div
                    t-foreach="categories"
                    t-as="category"
                    t-key="category"
                    t-ref="productsWithCategory_{{category}}">
                    <h2 t-esc="category" />
                    <div class="d-flex flex-wrap gap-3 justify-content-between mb-5">
                        <t t-foreach="selfOrderKiosk.productsGroupedByCategory[category]" t-as="product" t-key="product.id">
                            <ProductCard product="product" />
                        </t>
                    </div>
                </div>
            </div>
            <div class="control-buttons d-flex position-absolute bottom-0 w-100">
                <button class="h-100 btn btn-danger w-50 p-0 m-0 rounded-0 fs-2" t-on-click="start">CANCEL ORDER</button>
                <button class="h-100 btn btn-success w-50 p-0 m-0 rounded-0 fs-2" t-on-click="start">Review Order</button>
            </div>
        </div>
    </t>
</templates>
