<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="sale_order_portal_content_brazil" inherit_id="sale.sale_order_portal_content">
        <!-- hide the taxes th -->
        <th id="taxes_header" position="attributes">
            <attribute name="t-if">sale_order.country_code != 'BR'</attribute>
        </th>

        <!-- hide the taxes td -->
        <td id="taxes" position="attributes">
            <attribute name="t-if">sale_order.country_code != 'BR'</attribute>
        </td>

        <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" position="attributes">
            <attribute name="t-value">(current_subtotal + line.price_total) if sale_order.country_code == 'BR' else (current_subtotal + line.price_subtotal)</attribute>
        </t>

        <span t-field="line.price_subtotal" position="attributes">
            <attribute name="t-if">sale_order.country_code != 'BR'</attribute>
        </span>
        <span t-field="line.price_subtotal" position="after">
            <span t-if="sale_order.country_code == 'BR'" class="oe_order_line_price_subtotal" t-field="line.price_total"/>
        </span>
    </template>

    <record id="sale_order_portal_content_brazil" model="ir.ui.view">
        <field name="mode">extension</field>
    </record>
</odoo>
