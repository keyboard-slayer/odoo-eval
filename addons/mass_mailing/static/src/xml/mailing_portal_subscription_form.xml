<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">
    <!-- Re-render lists form as no reload is done on portal page -->
    <t t-name="mass_mailing.portal.list_form_content">
        <p>
            Update your subscriptions for <b t-out="email"/>
        </p>
        <ul id="o_mailing_subscription_form_lists"
            t-if="listsMemberOrPoposal.length"
            class="list-group">
            <li t-foreach="listsMemberOrPoposal"
                t-as="mailing_list"
                t-key="mailing_list_key"
                class="list-group-item d-flex align-items-center py-0 pe-0">
                <span class="ms-1 py-2" t-out="mailing_list['name']"/>
                <span class="ms-auto mb-0 form-switch form-check">
                    <label class="form-check-label px-3 py-2 d-flex o_mailing_subscription_form_list_toggle">
                        <t t-if="mailing_list['opt_out']">
                            Off
                        </t>
                        <t t-else="">
                            On
                        </t>
                        <input class="form-check-input mailing_lists_checkboxes ms-3 mb-0"
                            type="checkbox" role="switch"
                            name="mailing_list_ids"
                            t-att-id="'mailing_list_id' + mailing_list['id']"
                            t-att-data-member="mailing_list['member'] ? '1' : undefined"
                            t-att-value="mailing_list['id']"
                            t-att-checked="mailing_list['opt_out'] ? undefined : 'checked'"
                            t-att-title="mailing_list['name']"/>
                    </label>
                </span>
            </li>
        </ul>
    </t>

    <!-- Re-render lists (in readonly mode) as no reload is done on portal page -->
    <t t-name="mass_mailing.portal.list_form_content_readonly">
        <p>
            Your address <b t-out="email"/> is currently in our <strong>block list</strong>.
            <t t-if="listsOptin.length">
                You will not receive any news from those mailing lists you are a member of:
            </t>
            <t t-else="">
                No mass mailing will be sent to it until you re-allow mailings.
            </t>
        </p>
        <ul class="list-group mb-4"
            t-if="listsOptin.length">
            <t t-foreach="listsOptin"
               t-as="mailing_list"
               t-key="mailing_list_key">
                <li class="list-group-item d-flex align-items-center">
                    <strong t-out="mailing_list['name']"/>
                </li>
            </t>
        </ul>
    </t>

    <!-- Post action informative span -->
    <t t-name="mass_mailing.portal.list_form_update_error">
        <i class="fa fa-exclamation-triangle me-1"/>
        <span>An error occurred. Please retry later.</span>
    </t>
</templates>
