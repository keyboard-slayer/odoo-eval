<?xml version="1.0" encoding="UTF-8"?>
<templates id="payment" xml:space="preserve">
    <!-- The templates here as rendered by 'post_processing.js', you can also take
            a look at payment_portal_templates.xml (xmlid: payment_status) for more infos-->
    <t t-name="payment.display_tx_list">
        <div>
            <!-- Pending/Confirmed transactions -->
            <div t-if="tx_done || tx_pending">
                <h1>Operations in progress</h1>
                <div class="list-group">
                    <!-- Done transactions -->
                    <t t-if="tx_done"> <!-- I will not need foreach-->
                        <a t-att-href="tx_done['landing_route']" class="list-group-item">
                            <h4 class="list-group-item-heading mb5">
                                <t t-esc="tx_done['reference']"/>
                                <span class="badge float-end"><t t-esc="tx_done['amount']"/> <t t-esc="tx_done['currency_code']"/></span>
                            </h4>
                            <small class="list-group-item-text">
                                <t t-if="!tx_done['is_post_processed']">
                                    <t t-if="tx_done['operation'] != 'validation'">
                                        Your payment is being processed, please wait... <i class="fa fa-cog fa-spin"/>
                                    </t>
                                    <t t-else="">
                                        Saving your payment method, please wait... <i class="fa fa-cog fa-spin"/>
                                    </t>
                                </t>
                                <t t-else="">
                                    <t t-if="tx_done['operation'] != 'validation'">
                                        Your payment has been processed.<br/>
                                        Click here to be redirected to the confirmation page.
                                    </t>
                                    <t t-else="">
                                        Your payment method has been saved.<br/>
                                        Click here to be redirected to the confirmation page.
                                    </t>
                                </t>
                            </small>
                        </a>
                    </t>
                    <!-- Pending transactions -->
                    <t t-if="tx_pending">
                        <a t-att-href="tx_pending['landing_route']" class="list-group-item">
                            <h4 class="list-group-item-heading mb5">
                                <t t-esc="tx_pending['reference']"/>
                                <span class="badge float-end"><t t-esc="tx_pending['amount']"/> <t t-esc="tx_pending['currency_code']"/></span>
                            </h4>
                            <small class="list-group-item-text">
                                <t t-if="tx_pending['display_message']">
                                    <!-- display_message is the content of the HTML field associated
                                    with the current transaction state, set on the provider. -->
                                    <t t-out="tx_pending['display_message']"/>
                                </t>
                                <t t-else="">
                                    Your payment is in pending state.<br/>
                                    You will be notified when the payment is fully confirmed.<br/>
                                    Click here to be redirected to the confirmation page.
                                </t>
                            </small>
                        </a>
                    </t>
                </div>
            </div>
            <!-- Draft transactions -->
            <div t-if="tx_draft">
                <h1>Waiting for operations to process</h1>
                <ul class="list-group">
                    <a t-att-href="tx_draft['landing_route']" class="list-group-item">
                        <h4 class="list-group-item-heading mb5">
                            <t t-esc="tx_draft['reference']"/>
                            <span class="badge float-end"><t t-esc="tx_draft['amount']"/> <t t-esc="tx_draft['currency_code']"/></span>
                        </h4>
                        <small class="list-group-item-text">
                            <t t-if="tx_draft['display_message']">
                                <!-- display_message is the content of the HTML field associated
                                with the current transaction state, set on the provider. -->
                                <t t-out="tx_draft['display_message']"/>
                            </t>
                            <t t-else="">
                                We are waiting for the payment provider to confirm the payment.
                            </t>
                        </small>
                    </a>
                </ul>
            </div>
            <!-- Cancel transactions -->
            <div t-if="tx_cancel">
                <h1>Canceled operations</h1>
                <ul class="list-group">
                        <a t-att-href="tx_cancel['landing_route']" class="list-group-item">
                            <h4 class="list-group-item-heading mb5">
                                <t t-esc="tx_cancel['reference']"/>
                                <span class="badge float-end"><t t-esc="tx_cancel['amount']"/> <t t-esc="tx_cancel['currency_code']"/></span>
                            </h4>
                            <small class="list-group-item-text">
                                This payment has been canceled.<br/>
                                No payment has been processed.
                            </small>
                        </a>
                </ul>
            </div>
        </div>
    </t>

    <t t-name="payment.no_tx_found">
        <div class="text-center">
            <p>We are not able to find your payment, but don't worry.</p>
            <p>You should receive an email confirming your payment in a few minutes.</p>
            <p>If the payment hasn't been confirmed you can contact us.</p>
        </div>
    </t>

    <t t-name="payment.rpc_error">
        <div class="text-center">
            <p><strong>Server error:</strong> Unable to contact the Odoo server.</p>
            <p>Please wait ... <i class="fa fa-refresh fa-spin"></i></p>
        </div>
    </t>

    <t t-name="payment.exception">
        <div class="text-center">
            <h2>Internal server error</h2>
            <pre><t t-esc="exception_msg"/></pre>
        </div>
    </t>

</templates>
