<?xml version="1.0" encoding="UTF-8"?>
<templates id="payment" xml:space="preserve">
    <!-- The templates here as rendered by 'post_processing.js', you can also take
            a look at payment_portal_templates.xml (xmlid: payment_status) for more infos-->
    <t t-name="payment.display_tx_list">
        <!-- Done transactions -->
        <t t-if="state == 'done'">
            <t t-if="!is_post_processed">
                <t t-set="alert_message" t-value="operation != 'validation' ? 'Your payment is being processed' : 'Saving your payment method'"/>
            </t>
            <t t-else="">
                <t t-set="alert_header" t-value="operation != 'validation' ? 'Your payment has been processed' : 'Your payment method has been saved'"/>
            </t>
        </t>

        <!-- Pending transactions -->
        <t t-if="state == 'pending'">
            <t t-set="alert_message" t-value="display_message"/>
        </t>

        <!-- Draft transactions -->
        <t t-if="state == 'draft'">
            <t t-set="alert_message" t-value="display_message ? display_message : 'We are waiting for the payment provider to confirm the payment.'"/>
        </t>

        <!-- Cancel transactions -->
        <t t-if="state == 'cancel'">
            <t t-set="alert_style" t-value="'danger'"/>
            <t t-set="alert_header" t-value="'This payment has been canceled'"/>
            <t t-set="alert_message" t-value="'No payment has been processed.'"/>
        </t>

        <div id="o_payment_status_alert" t-attf-class="alert alert-{{alert_style ? alert_style : 'info'}} d-flex align-items-center gap-3">
            <i t-attf-class="fa fa-{{alert_style and alert_style == 'danger' ? 'exclamation-triangle' : 'cog fa-spin'}}"/>
            <div>
                <h5 class="alert-heading mb-0" t-out="alert_header ? alert_header : 'Please wait...'"/>
                <p t-if="alert_message" class="mb-0" t-out="alert_message"/>
            </div>
            <a t-att-href="landing_route" class="alert-link ms-auto text-nowrap">Skip<i class="oi oi-arrow-right small"/></a>
        </div>

        <div class="o_payment_details o_cc2 row row-cols-1 row-cols-md-2 row-cols-lg-4 mx-0 mb-3 py-2 rounded">
            <div class="col my-3">
                <label for="form_amount" class="d-block small text-muted">
                    Amount
                </label>
                <span name="form_amount"
                      t-out="amount"/>
            </div>
            <div class="col my-3">
                <label for="form_reference" class="d-block small text-muted">
                    Reference
                </label>
                <a t-att-href="landing_route"
                   name="form_reference"
                   t-esc="reference"/>
            </div>
            <div class="col my-3">
                <label for="form_provider" class="d-block small text-muted">
                    Powered by
                </label>
                <span name="form_provider"
                      t-esc="provider_name"/>
            </div>
        </div>
    </t>

    <t t-name="payment.no_tx_found">
        <div class="text-center">
            <p>We are not able to find your payment, but don't worry.</p>
            <p>You should receive an email confirming your payment in a few minutes.</p>
            <p>If the payment hasn't been confirmed you can contact us.</p>
        </div>
    </t>

    <t t-name="payment.rpc_error">
        <div class="text-center">
            <p><strong>Server error:</strong> Unable to contact the Odoo server.</p>
            <p>Please wait ... <i class="fa fa-refresh fa-spin"></i></p>
        </div>
    </t>

    <t t-name="payment.exception">
        <div class="text-center">
            <h2>Internal server error</h2>
            <pre><t t-esc="exception_msg"/></pre>
        </div>
    </t>

</templates>
