<templates id="template" xml:space="preserve">

    <t t-name="html_editor.linkPopover">
        <div class="o-we-linkpopover d-flex bg-white overflow-auto shadow">
            <div t-if="state.editing" class="m-1 container-fluid d-flex vertical-center" t-ref="editing-wrapper">
                <div class="col m-1" data-prevent-closing-overlay="true">
                    <div class="input-group">
                        <input class="o_we_label_link m-1" t-model="state.label" placeholder="Type your link label"/>
                        <input class="o_we_href_input_link m-1" t-model="state.url" placeholder="Type your URL" t-on-keydown="onKeydownEnter"/>
                    </div>
                    <div class="input-group" t-on-change="onChangeClasses">
                        <select name="link_type" class="form-select" t-on-change="(ev)=>this.state.type = ev.target.value">
                            <t t-foreach="this.colorsData" t-as="colorData" t-key="colorData.type">
                                <t t-if="colorData.type !== 'custom'">
                                    <option t-att-value="colorData.type" t-att-selected="state.type === colorData.type" t-attf-class="o_btn_preview dropdown-item">
                                        <span t-esc="colorData.label"/>
                                    </option>
                                </t>
                            </t>
                        </select>
                        <div t-if="state.type !== 'custom' and state.type !==  ''" class="input-group md-3">
                                <select name="link_style_size" class="form-select link-style" t-on-change="(ev)=>this.state.buttonSize = ev.target.value">
                                    <t t-foreach="this.buttonSizesData" t-as="buttonSizesData" t-key="buttonSizesData.size">
                                        <option t-att-value="buttonSizesData.size" t-att-selected="state.buttonSize === buttonSizesData.size">
                                            <span t-esc="buttonSizesData.label"/>
                                        </option>
                                    </t>
                                </select>
                                <select name="link_style_shape" class="form-select link-style" t-on-change="(ev)=>this.state.buttonStyle = ev.target.value">
                                    <t t-foreach="this.buttonStylesData" t-as="buttonStylesData" t-key="buttonStylesData.style">
                                        <option t-att-value="buttonStylesData.style" t-att-selected="state.buttonStyle === buttonStylesData.style">
                                            <span t-esc="buttonStylesData.label"/>
                                        </option>
                                    </t>
                                </select>
                        </div>
                        <div>
                            <button class="o_we_apply_link btn btn-primary m-1" t-on-click="onClickApply">Apply</button>
                        </div>
                    </div>
                </div>

                <div class="col o_link_dialog_preview">
                    <div class="text-center" style="padding-top: 15px; padding-left: 10px; padding-right: 10px;">
                        <label>Preview</label>
                        <div style="max-width: 100px; max-height: 200px;" class="text-truncate">
                            <a href="#" t-if="state.url" id="link-preview" aria-label="Preview" title="Preview" t-attf-class="{{state.classes}} text-truncate" style="max-width: 90px;">
                                <t t-esc="state.label or state.url"/>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div t-else="" class="d-flex flex-column" data-prevent-closing-overlay="true">
                <div class="d-flex" style="min-width: 250px;">
                    <span class="col-1 o_we_preview_favicon">
                        <i t-if="!state.previewImg" t-attf-class="fa {{state.faIcon}}"></i>
                        <img t-else="" t-attf-src="{{state.imgSrc}} col-1" class="align-content-center"></img>
                    </span>
                    <div class="w-100">
                        <div class="d-flex me-1">
                            <a href="#" target="_blank" t-attf-href="{{state.url}}" class="o_we_url_link fw-bold flex-grow-1 text-truncate" title="Open in a new tab">
                                <t t-esc="state.urlTitle"/>
                            </a>
                            <a href="#" class="mx-1 o_we_copy_link text-dark" t-on-click="onClickCopy" title="Copy Link">
                                <i class="fa fa-clone"></i>
                            </a>
                            <a href="#" class="mx-1 o_we_edit_link text-dark" t-on-click="onClickEdit" title="Edit Link">
                                <i class="fa fa-edit"></i>
                            </a>
                            <a href="#" class="ms-1 o_we_remove_link text-dark" t-on-click="onClickRemove" title="Remove Link">
                                <i class="fa fa-chain-broken"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="o_extra_info_card" style="max-width: 220px">
                    <div t-if="state.urlTitle and state.url and state.urlTitle !== state.url" class="text-truncate offset-md-1" style="font-size: 12px; padding-left: 3px;">
                        <a href="#" target="_blank" t-attf-href="{{state.url}}" t-attf-class="o_we_full_url mt-1 text-muted o_we_webkit_box" title="Open in a new tab">
                            <t t-esc="state.url || 'No URL specified'"/>
                        </a>
                    </div>
                    <div t-if="state.urlDescription" class="d-flex">
                        <i class="fa fa-align-right ms-1 me-1 align-content-center"></i>
                        <span style="display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 2; font-size: 12px;color: gray; overflow: hidden;">
                            <t t-esc="state.urlDescription"/>
                        </span>
                    </div>
                </div>
                <div t-if="state.urlTitle and state.urlTitle !== state.label and state.urlTitle !== state.url" class="d-flex align-items-baseline" style="background-color: #71639e;">
                    <i class="fa fa-bell fa-fw ms-1 me-1" style="color: white;"></i>
                    <span class="me-2 flex-grow-1" style="color: white;">Replace URL with its title?</span>
                    <button class=" btn btn-sm btn-primary m-1" t-on-click="onClickReplaceTitle">Yes</button>
                </div>
            </div>
        </div>
    </t>

</templates>
